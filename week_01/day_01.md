## 一. 介绍一下`TCP/IP`模型和`OSI`模型的区别

`OSI`模型，是国际标准化组织(`ISO`)制定的一个用于计算机或通信系统间互联的标准体系，将计算机网络通信划分为七个不同的层级，每个层级都负责特定的功能。每个层级都构建在其下方的层级之上，并为上方的层级提供服务。七层从下到上分别是物理层，数据链路层，网络层，传输层，会话层，表示层和应用层。虽然`OSI`模型在理论上更全面，但在实际网络通信中，`TCP/IP`模型更为实用。`TCP/IP`模型分为四个层级，每个层级负责特定的网络功能。

1. **应用层**：该层与`OSI`模型的应用层和表示层以及会话层类似，提供直接与用户应用程序交互的接口。它为网络上的各种应用程序提供服务，如电子邮件(`SMTP`), 网页浏览(`HTTP`), 文件传输(`FTP`)等。
2. **传输层**：该层对应`OSI`模型的传输层。它负责端到端的数据传输，提供可靠的，无连接的数据传输服务。主要的传输层协议有`TCP`和`UDP`。`TCP`提供可靠的数据传输服务，确保数据的正确性和完整性；而`UDP`则是无连接的，适用于不要求可靠性的传输，如实时音频和视频流。
3. **网络层**：该层对应`OSI`模型的网络层。主要协议是`IP`，它负责数据包的路由和转发，选择最佳路径将数据从源主机传输到目标主机。`IP`协议使用`IP`地址来标识主机和网络，并进行逻辑地址寻址。
4. **网络接口层**：该层对应`OSI`模型的数据链路层和物理层。它负责物理传输媒介的传输，例如以太网，`Wi-Fi`等，并提供错误检测和纠正的功能。此外，网络接口层还包含硬件地址(`MAC`地址)的管理。

---

## 二. 从输入`URL`到页面展示到底发生了什么

1. 输入网址，解析`URL`信息，准备发送`HTTP`请求
2. 检查浏览器缓存里是否有缓存该资源，如果有直接返回；如果没有进入下一步网络请求
3. **DNS域名解析**：网络请求前，进行`DNS`解析，以获取请求域名的`IP`地址。`DNS`解析时会按本地浏览器缓存->本地`Host`文件->路由器缓存->`DNS`服务器->根`DNS`服务器的顺序查询域名对应`IP`，直到找到为止。
4. **TCP三次握手建立连接**：浏览器与服务器`IP`建立`TCP`连接
5. **客户端发送HTTP请求**：连接建立后，浏览器端会构建请求行，请求头等信息，并把和该域名相关的`Cookie`等数据附加到请求头中，向服务器构建请求信息。如果是`HTTPS`的话，还涉及到`HTTPS`的加解密流程。
6. **服务器处理请求并返回HTTP资源**：服务器接收到请求信息，根据请求生成响应数据
7. **TCP四次挥手断开连接**：浏览器与服务器`IP`断开`TCP`连接
8. **浏览器解析响应并渲染页面**：
    - 浏览器解析响应头。若响应头状态码为`301，302`，会重定向到新地址；若响应数据类型是字节流类型，一般会将请求提交给下载管理器；若是`HTML`类型，会进入下一步渲染流程。
    - 浏览器解析`HTML`文件，创建`DOM`树，解析`CSS`进行样式计算，然后将`CSS`和`DOM`合并，构建渲染树；最后布局和绘制渲染树，完成页面展示。
