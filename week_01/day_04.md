# HTTP 各版本核心区别对比

## 一、HTTP/1.0 与 HTTP/1.1 的区别

### 1. **连接方式**
- **HTTP/1.0**  
  - 默认短连接，每次请求需新建 TCP 连接  
  - 通过 `Connection: keep-alive` 头实现持久连接（非默认）  
- **HTTP/1.1**  
  - **默认持久连接**：单个 TCP 连接可发送多个请求/响应  
  - 通过 `Connection: close` 显式关闭连接  

### 2. **管道化（Pipelining）**
- **HTTP/1.0**  
  - 不支持管道化  
- **HTTP/1.1**  
  - 支持管道化（但默认关闭）  
  - 允许客户端在未收到响应前发送多个请求  

### 3. **缓存控制**
- **HTTP/1.0**  
  - 使用 `Expires` 和 `If-Modified-Since` 控制缓存  
- **HTTP/1.1**  
  - 引入 `ETag`、`If-None-Match`、`Cache-Control` 等更精细的缓存策略  

### 4. **Host 头**
- **HTTP/1.0**  
  - 无 `Host` 头字段  
- **HTTP/1.1**  
  - **强制要求 `Host` 头**：支持虚拟主机（单 IP 托管多域名）  

### 5. **带宽优化**
- **HTTP/1.0**  
  - 不支持断点续传，需完整传输资源  
- **HTTP/1.1**  
  - 引入 `Range` 和 `Content-Range` 头，支持**分块请求**（状态码 `206 Partial Content`）  

### 6. **错误处理**
- **HTTP/1.1**  
  - 新增状态码（如 `100 Continue`）：支持客户端分步发送请求  
  - 更详细的错误码（如 `409 Conflict`、`410 Gone`）  

---

## 二、HTTP/2.0 与 HTTP/1.1 的区别

### 1. **传输协议**
- **HTTP/1.1**  
  - 文本格式（可读性强，解析效率低）  
- **HTTP/2.0**  
  - **二进制分帧**：数据以二进制格式传输，解析高效  

### 2. **多路复用**
- **HTTP/1.1**  
  - 持久连接需按序处理请求（队头阻塞）  
- **HTTP/2.0**  
  - **多路复用**：单个连接上并行传输多个请求/响应，彻底解决队头阻塞  

### 3. **头部压缩**
- **HTTP/1.1**  
  - 头部信息冗余（如 `Cookie`、`User-Agent` 重复传输）  
- **HTTP/2.0**  
  - **HPACK 算法**：压缩头部，减少冗余数据传输  

### 4. **服务器推送**
- **HTTP/1.1**  
  - 客户端需主动请求资源  
- **HTTP/2.0**  
  - **主动推送**：服务器可提前推送资源（如 CSS/JS）到客户端缓存  

### 5. **优先级与依赖**
- **HTTP/2.0**  
  - 可设置请求优先级，声明资源依赖关系（如优先加载 HTML）  

---

## 三、HTTP/3.0 的核心特性

### 1. **协议基础**
- 基于 **QUIC 协议**（基于 UDP，而非 TCP）  

### 2. **无队头阻塞**
- **Stream 独立**：单个 Stream 丢包不影响其他 Stream  
- 彻底解决 TCP 队头阻塞问题  

### 3. **连接建立**
- **0-RTT 快速连接**：非首次连接可跳过握手，减少延迟  

### 4. **连接迁移**
- **IP 切换无缝迁移**：网络切换时保持连接（如 Wi-Fi 转 4G）  

### 5. **前向纠错（FEC）**
- **冗余数据包**：少量丢包可通过其他包恢复，减少重传  

### 6. **安全性**
- **默认加密**：集成 TLS 1.3，强制加密传输  

---

## 总结对比

| 特性               | HTTP/1.0       | HTTP/1.1            | HTTP/2.0            | HTTP/3.0            |
|--------------------|----------------|---------------------|---------------------|---------------------|
| **连接类型**       | 短连接         | 持久连接            | 多路复用            | QUIC 多路复用       |
| **传输格式**       | 文本           | 文本                | 二进制分帧          | 二进制分帧          |
| **头部压缩**       | 无             | 无                  | HPACK              | QPACK              |
| **队头阻塞**       | 存在           | 存在（TCP 层）      | 解决（应用层）      | 彻底解决（UDP 层）  |
| **服务器推送**     | 不支持         | 不支持              | 支持                | 支持                |
| **默认加密**       | 无             | 无                  | 无                  | TLS 1.3            |
| **底层协议**       | TCP            | TCP                 | TCP                 | UDP（QUIC）         |
