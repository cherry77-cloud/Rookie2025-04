



 
---
## 三. Cookie 和 Session 是什么，有什么区别
Cookie 和 Session 都用于管理用户的状态和身份，区别如下：

### Cookie
- **存储位置**：数据存储在**用户的浏览器**中。
- **工作机制**：  
  服务器通过响应头（`Set-Cookie`）将一个或多个 Cookie 发送到浏览器，浏览器后续请求时会自动携带这些 Cookie（通过请求头的 `Cookie` 字段）。
- **用途**：  
  用于客户端身份识别、保存用户偏好设置（如语言、主题）等。
- **生命周期**：  
  可通过 `Expires` 或 `Max-Age` 属性设置过期时间。若未设置，则为会话 Cookie，浏览器关闭后失效。
- **安全性**：  
  数据可能被用户读取或篡改，敏感信息需加密。可通过 `HttpOnly`（禁止 JS 访问）、`Secure`（仅 HTTPS 传输）等属性增强安全性。
- **容量限制**：  
  单个域名下通常不超过 4KB，且浏览器对 Cookie 总数有限制。

### Session
- **存储位置**：数据存储在**服务器**上（如内存、数据库）。
- **工作机制**：  
  服务器为每个会话生成唯一的 **Session ID**，通过 Cookie 或 URL 参数传递给浏览器。浏览器后续请求携带此 ID，服务器根据 ID 读取对应的 Session 数据。
- **用途**：  
  维护用户登录状态、存储临时交互数据（如购物车内容）。
- **生命周期**：  
  依赖会话持续时间，默认在用户关闭浏览器后失效。服务器也可设置超时时间强制过期。
- **安全性**：  
  敏感数据存储在服务端，安全性更高。但需防范 Session ID 泄露（如劫持、预测）。
- **容量限制**：  
  由服务器内存/存储配置决定，一般远大于 Cookie。

### 主要区别
| 特性                | Cookie                          | Session                      |
|---------------------|---------------------------------|------------------------------|
| **数据存储位置**     | 客户端                          | 服务端                       |
| **数据传输方式**     | 自动通过 HTTP 头                | 仅传递 Session ID            |
| **数据安全性**       | 较低（客户端可修改）            | 较高（服务端控制）           |
| **存储容量**         | 较小（约 4KB）                  | 较大（取决于服务器配置）     |
| **生命周期控制**     | 客户端或服务端均可设置过期时间  | 服务端控制过期时间           |
