## 一. `MySQL`的执行引擎有哪些？

`MySQL`的执行引擎主要负责查询的执行和数据的存储，主要包含以下引擎：

- **`InnoDB`**  
  - 支持事务的 `ACID` 特性
  - 提供行级锁和外键约束
  - 默认存储引擎，适用于需要事务支持和高并发的场景

- **`MyISAM`**  
  - 早期默认存储引擎，支持全文索引
  - 不支持事务、行级锁和外键约束
  - 适用于快速读取且数据量不大的场景

- **`Memory`**  
  - 数据存储在内存中，访问速度快
  - 数据库重启后数据丢失

---

## 二. `MySQL`为什么使用`B+`树来索引？

`B+`树是`B`树的变种，具有以下优势：

1. **单点查询性能**  
   - `B+`树的非叶子节点仅存储索引，可存放更多索引，树更矮胖，减少磁盘`I/O`次数  
   - `B`树的节点同时存储索引和记录，查询波动较大

2. **插入和删除效率**  
   - `B+`树存在冗余节点，删除时可直接操作叶子节点，无需调整非叶子节点  
   - `B`树删除可能涉及复杂的树形结构调整

3. **范围查询优化**  
   - `B+`树叶子节点通过链表连接，范围查询只需遍历链表  
   - `B`树需多次磁盘`I/O`遍历树结构

4. **适用场景对比**  
   - `B+`树适合数据库等大量范围查询场景  
   - `B`树适合`NoSQL`（如`MongoDB`）等单点查询场景

---

## 三、索引失效的场景

以下场景会导致索引失效，降低查询性能：

1. **`OR`条件连接不同索引列**  
   ```sql
   WHERE col1 = 1 OR col2 = 2  -- 若col1和col2使用不同索引
   ```
2. **非等值查询**
   ```sql
   WHERE col != 10  -- 或使用 <> 操作符
   ```

3. **列类型转换**
   ```sql
   WHERE CAST(col AS DATE) = '2023-01-01'  -- 对列进行显式/隐式类型转换
   ```

4. **`LIKE`通配符开头**
   ```sql
   WHERE col LIKE '%abc'  -- 以%开头的模糊查询
   ```

5. **函数或表达式操作列**
   ```sql
   WHERE UPPER(col) = 'VALUE'  -- 对列使用函数或运算
   ```

6. **表连接列类型不匹配**
   ```sql
   JOIN table1 ON table1.int_col = table2.str_col  -- 类型不一致导致隐式转换
   ```
